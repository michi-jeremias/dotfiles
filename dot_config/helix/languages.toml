[language-server.biome]
args = ["lsp-proxy"]
command = "biome"

# [language-server.deno]
# command = "deno"
# args = ["lsp"]
# config = { enable = true, line = true, unstable = true, importMap = "deno.json" }

[language-server.deno-lsp]
command = "deno"
args = ["lsp"]
required-root-patterns = ["deno.*"]
environment = { "DENO_UNSTABLE_SLOPPY_IMPORTS" = "1" }

[language-server.deno-lsp.config.deno]
enable = true
# unstable = true
suggest = { completeFunctionCalls = false, imports = { imports = { "https://deno.land" = true } } }

[language-server.typescript-language-server]
required-root-patterns = ["package.json", "tsconfig.json"]

[language-server.typescript-language-server.config]
format = { "semicolons" = "insert" }

[language-server.lua-language-server]
command = "lua-language-server"
enable = true

[language-server.rust-analyzer.config]
check.command = "clippy"

[[language]]
name = "lua"
auto-format = true

[[language]]
name = "rust"
auto-format = true

[[language]]
name = "typescript"
roots = ["deno.json", "deno.jsonc", "package.json", "tsconfig.json"]
language-id = "typescript"
scope = "source.ts"
injection-regex = "^(ts|typescript)$"
file-types = ["ts"]
shebangs = ["deno", "node"]
# language-servers = ["typescript-language-server"]
language-servers = [
  # { name = "deno-lsp", except-features = ["format"] },
  # { name = "typescript-language-server", except-features = ["format"] },
  { name = "deno-lsp" },
  { name = "typescript-language-server" },
  # "biome",
]
formatter = { command = "dprint", args = ["fmt", "--stdin", "typescript"] }
# formatter = { command = "biome", args = ["format", "--stdin-file-path", "a.ts"] }
auto-format = true

[[language]]
name = "tsx"
language-servers = ["typescript-language-server"]
formatter = { command = "dprint", args = ["fmt", "--stdin", "tsx"] }
auto-format = true

[[language]]
name = "jsx"
language-servers = ["typescript-language-server"]
formatter = { command = "dprint", args = ["fmt", "--stdin", "jsx"] }
auto-format = true

[[language]]
name = "javascript"
language-servers = ["typescript-language-server"]
formatter = { command = "dprint", args = ["fmt", "--stdin", "javascript"] }
auto-format = true

[[language]]
name = "html"
auto-format = true

[[language]]
name = "css"
language-servers = ["vscode-css-language-server"]
auto-format = true

[[language]]
name = "json"
formatter = { command = "dprint", args = ["fmt", "--stdin", "json"] }
auto-format = true

# [[language]]
# name = "Dockerfile"
# formatter = { command = "dprint", args = [ "fmt", "--stdin", "Dockerfile" ] }
# auto-format = true

[[language]]
name = "toml"
formatter = { command = "dprint", args = ["fmt", "--stdin", "toml"] }
auto-format = true

[[language]]
name = "yaml"
language-servers = ["yaml-language-server"]
formatter = { command = "dprint", args = ["fmt", "--stdin", "pretty_yaml"] }
auto-format = true

[[language]]
name = "sql"
language-servers = ["sql-language-server"]
auto-format = true
